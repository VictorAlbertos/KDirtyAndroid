task('freshStart') doLast {
  String startFresh = "fresh_start/"

  String androidTest = "presentation/src/androidTest/java/presentation/"
  Helper.removeDir(androidTest + "sections")

  Helper.removeDir("data/src/main/java/data/sections/users")
  Helper.removeDir("data/src/test/java/data/sections/users")

  String presentation = "presentation/src/main/java/presentation/"

  Helper.moveFileDeleting(startFresh + "PresentationComponent",
          presentation + "foundation/dagger/", "PresentationComponent.kt")

  Helper.removeDir(presentation + "sections/dashboard")

  Helper.removeDir(presentation + "sections/users")

  Helper.moveFileDeleting(startFresh + "LaunchPresenter",
          presentation + "sections/launch", "LaunchPresenter.kt")

  Helper.moveFileDeleting(startFresh + "LaunchWireframe",
          presentation + "sections/launch", "LaunchWireframe.kt")

  String resources = "presentation/src/main/res/"

  Helper.removeDir(resources+"sections/dashboard")
  Helper.removeDir(resources+"sections/users")
  Helper.removeDir(resources+"/drawable")
  Helper.removeDir(resources+"/drawable-anydpi")
  Helper.removeDir(resources+"/menu")

  Helper.moveFileDeleting(startFresh + "AndroidManifest", "presentation/src/main/", "AndroidManifest.xml")
  Helper.moveFileDeleting(startFresh + "strings", "presentation/src/main/res/values/", "strings.xml")
  Helper.moveFileDeleting(startFresh + "build", "presentation/", "build.gradle")

  Helper.moveFileDeleting(startFresh + "DataModule",
          "data/src/main/java/data/foundation/dagger", "DataModule.kt")

  Helper.removeDir("presentation/src/test/java/presentation/sections")

  Helper.moveFileDeleting(startFresh + "README.md", ".", "README.md")
  Helper.moveFileDeleting(startFresh + "LICENSE.txt", ".", "LICENSE.txt")

  Helper.removeDir(".git")
  Helper.removeDir(startFresh)

  println("Remember cleaning and building the project")
}

class Helper {
  static void removeDir(String path) {
    new File(path).deleteDir()
  }

  static void moveFileDeleting(String source, String destination, String nameNewFile) {
    File fileSrc = new File(source)
    File dir = new File(destination)
    File fileDst = new File(dir, nameNewFile)
    dir.mkdirs()
    fileDst.delete()
    if (!fileSrc.renameTo(fileDst)) println("Failed to replace " + fileDst.getAbsolutePath())
  }
}
